<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Habit - MVP</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for in-browser JSX support -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Framer Motion (for beautiful Reanimated-like animations) -->
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;500;600&family=Inter:wght@300;400;600&display=swap');
        
        body {
            background-color: #000000;
            color: #ffffff;
            font-family: 'Inter', sans-serif;
            margin: 0;
            user-select: none;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .serif-font {
            font-family: 'Shippori Mincho', serif;
        }

        .haptic-active:active {
            transform: scale(0.96);
            transition: transform 0.1s;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;
        const { motion, AnimatePresence } = window.Motion;

        // ==========================================
        // 1. Data (Local Quotes)
        // ==========================================
        const jobsQuotes = {
            completion: [
                "Áæé„Åó„Åï„ÅØ„ÄÅ„Åù„Åì„Å´‰∏çË¶Å„Å™„ÇÇ„ÅÆ„Åå‰Ωï‰∏Ä„Å§„Å™„ÅÑ„Å®„Åç„Å´„ÅÆ„ÅøÁîü„Åæ„Çå„Çã„ÄÇ",
                "‰ªäÊó•„ÇÇ„Åæ„Åü‰∏Ä„Å§„ÄÅÂÆáÂÆô„Å´Â∞è„Åï„Å™Âáπ„Åø„Çí„Å§„Åè„Å£„Åü„Å™„ÄÇ",
                "Á¥†Êô¥„Çâ„Åó„ÅÑ„ÄÇÊúÄ„ÇÇÁ¥†Êô¥„Çâ„Åó„ÅÑ„ÅÆ„ÅØ„ÄÅÂêõ„Åå„Åù„Çå„ÇíÂßã„ÇÅ„Åü„Åì„Å®„Å†„ÄÇ",
                "1Áßí„ÅÆÁ©ç„ÅøÈáç„Å≠„Åå„ÄÅ„ÇÑ„Åå„Å¶‰∏ñÁïå„ÇíÂ§â„Åà„Çã„Ç§„Éé„Éô„Éº„Ç∑„Éß„É≥„Å´„Å™„Çã„ÄÇ",
                "ÂÆåÁíß„Å†„ÄÇ„Åï„ÅÇ„ÄÅÊ¨°„ÅØ„ÇÇ„Å£„Å®„Ç∑„É≥„Éó„É´„Å´Áîü„Åç„Çà„ÅÜ„ÄÇ"
            ],
            skip: [
                "‰ºëÊÅØ„ÇÇ„Åæ„Åü„ÄÅ„Éá„Ç∂„Ç§„É≥„ÅÆ‰∏ÄÈÉ®„Å†„ÄÇÁæé„Åó„ÅÑ‰ΩôÁôΩ„ÇíÊåÅ„Åü„Åõ„Çà„ÅÜ„ÄÇ",
                "ÁÑ¶„ÇãÂøÖË¶Å„ÅØ„Å™„ÅÑ„ÄÇ„Ç§„Éé„Éô„Éº„Ç∑„Éß„É≥„Å´„ÅØÂÖÖÈõªÊúüÈñì„ÅåÂøÖË¶Å„Å†„ÄÇ",
                "Á´ã„Å°Ê≠¢„Åæ„ÇãÂãáÊ∞ó„Åå„ÅÇ„Çã„Å™„Çâ„ÄÅÂêõ„ÅØ„Åæ„ÅüÂâç„Å´ÈÄ≤„ÇÅ„Çã„ÄÇ",
                "‰ªäÊó•„ÅÆ„Çπ„Ç≠„ÉÉ„Éó„ÅØ„ÄÅÊòéÊó•„ÅÆ„Åü„ÇÅ„ÅÆÊúÄ„ÇÇÊà¶Áï•ÁöÑ„Å™ÊÑèÊÄùÊ±∫ÂÆö„Å†„ÄÇ"
            ],
            downgrade: [
                "Â∞è„Åï„Åè„Å¶„ÇÇ„ÅÑ„ÅÑ„ÄÇÂ§ß‰∫ã„Å™„ÅÆ„ÅØ„ÄÅÂ¶•Âçî„Åõ„Åö„Å´„ÇÑ„ÇäÈÅÇ„Åí„Çã„Åì„Å®„Å†„ÄÇ",
                "Âà∂Á¥Ñ„Åì„Åù„Åå„ÄÅÊàë„ÄÖ„Çí„ÇØ„É™„Ç®„Ç§„ÉÜ„Ç£„Éñ„Å´„Åô„Çã„ÄÇ",
                "„Å©„Çì„Å™„Å´Â∞è„Åï„Åè„Å®„ÇÇ„ÄÅÂâçÈÄ≤„Åó„Åü„Å®„ÅÑ„ÅÜ‰∫ãÂÆü„Å´Â§â„Çè„Çä„ÅØ„Å™„ÅÑ„ÄÇ",
                "Áæé„Åó„ÅÑ„ÄÇ„Éè„Éº„Éâ„É´„Çí‰∏ã„Åí„Çã„Å®„ÅÑ„ÅÜÂÆåÁíß„Å™„Éá„Ç∂„Ç§„É≥„Å†„ÄÇ"
            ]
        };

        const getRandomQuote = (type) => {
            const quotes = jobsQuotes[type];
            return quotes[Math.floor(Math.random() * quotes.length)];
        };

        // ==========================================
        // 2. Custom Hooks (The Mentor)
        // ==========================================
        const useMentor = () => {
            const [toastMessage, setToastMessage] = useState(null);
            const timeoutRef = useRef(null);

            const showMentorMessage = useCallback((action) => {
                if (timeoutRef.current) clearTimeout(timeoutRef.current);
                
                const message = getRandomQuote(action);
                setToastMessage(message);

                timeoutRef.current = setTimeout(() => {
                    setToastMessage(null);
                }, 4000);
            }, []);

            return { toastMessage, showMentorMessage };
        };

        // ==========================================
        // 3. UI Components (Toast)
        // ==========================================
        const Toast = ({ message }) => {
            return (
                <AnimatePresence>
                    {message && (
                        <motion.div
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            exit={{ opacity: 0, y: 20 }}
                            transition={{ duration: 0.6, ease: [0.16, 1, 0.3, 1] }} // Expo Out
                            className="fixed bottom-10 left-1/2 -translate-x-1/2 bg-black/90 px-6 py-4 rounded-xl border border-neutral-800 shadow-[0_0_40px_rgba(255,255,255,0.1)] z-50 w-full max-w-sm backdrop-blur-md"
                        >
                            <p className="text-white text-base leading-relaxed text-center serif-font tracking-wide">
                                {message}
                            </p>
                        </motion.div>
                    )}
                </AnimatePresence>
            );
        };

        // ==========================================
        // 4. Main Screen
        // ==========================================
        const App = () => {
            const [habit, setHabit] = useState({
                id: '1',
                title: '15ÂàÜË™≠Êõ∏',
                downgradeTitle: '1ÂàÜË™≠Êõ∏ÔºàÊú¨„ÇíÈñã„Åè„Å†„ÅëÔºâ',
                isCompletedToday: false,
                streak: 12
            });

            const { toastMessage, showMentorMessage } = useMentor();
            const [particles, setParticles] = useState([]);

            const triggerHaptics = () => {
                if (navigator.vibrate) {
                    navigator.vibrate(50); // Light haptic feedback
                }
            };

            const triggerParticles = (e) => {
                const newParticles = Array.from({ length: 15 }).map((_, i) => ({
                    id: Date.now() + i,
                    x: (window.innerWidth / 2) + (Math.random() * 100 - 50),
                    y: (window.innerHeight / 2) + (Math.random() * 100 - 50),
                    size: Math.random() * 6 + 2,
                    angle: Math.random() * 360,
                    speed: Math.random() * 2 + 1
                }));
                setParticles(newParticles);
                setTimeout(() => setParticles([]), 1000);
            };

            const handleComplete = (e) => {
                triggerHaptics();
                triggerParticles(e);
                setHabit(prev => ({ ...prev, isCompletedToday: true, streak: prev.streak + 1 }));
                showMentorMessage('completion');
            };

            const handleSkip = () => {
                triggerHaptics();
                setHabit(prev => ({ ...prev, isCompletedToday: true }));
                showMentorMessage('skip');
            };

            const handleDowngrade = (e) => {
                triggerHaptics();
                triggerParticles(e);
                setHabit(prev => ({ ...prev, isCompletedToday: true, streak: prev.streak + 1 }));
                showMentorMessage('downgrade');
            };

            return (
                <div className="flex flex-col h-screen w-full items-center justify-center relative overflow-hidden">
                    
                    {/* Header: Streak */}
                    <div className="absolute top-12 flex flex-col items-center">
                        <motion.div 
                            key={habit.streak}
                            initial={{ scale: 0.8, opacity: 0 }}
                            animate={{ scale: 1, opacity: 1 }}
                            className="text-rose-500 font-semibold text-2xl tracking-widest flex items-center gap-2"
                        >
                            <span>üî•</span> {habit.streak} Days
                        </motion.div>
                    </div>

                    {/* Main Content Area */}
                    <div className="w-full max-w-sm px-6 flex flex-col justify-center items-center">
                        
                        <AnimatePresence mode="wait">
                            {!habit.isCompletedToday ? (
                                <motion.div 
                                    key="todo"
                                    initial={{ opacity: 0, filter: 'blur(10px)' }}
                                    animate={{ opacity: 1, filter: 'blur(0px)' }}
                                    exit={{ opacity: 0, scale: 0.95, filter: 'blur(10px)' }}
                                    transition={{ duration: 0.5 }}
                                    className="w-full flex flex-col items-center"
                                >
                                    <h1 className="text-4xl font-bold text-white mb-16 tracking-tight text-center">
                                        {habit.title}
                                    </h1>
                                    
                                    {/* 1„Çø„ÉÉ„ÉóÂÆå‰∫Ü„Éú„Çø„É≥ */}
                                    <button 
                                        onClick={handleComplete}
                                        className="w-full haptic-active bg-white text-black font-semibold text-xl py-5 px-8 rounded-[32px] shadow-[0_4px_32px_rgba(255,255,255,0.3)] mb-8 transition-transform"
                                    >
                                        ÂÆå‰∫Ü„Åô„Çã
                                    </button>

                                    {/* „Çπ„Éû„Éº„Éà„ÉÄ„Ç¶„É≥„Ç∞„É¨„Éº„Éâ */}
                                    <button 
                                        onClick={handleDowngrade}
                                        className="w-full haptic-active text-neutral-400 font-medium text-base py-3 mb-4 transition-colors hover:text-white"
                                    >
                                        Âøô„Åó„ÅÑ: {habit.downgradeTitle}
                                    </button>

                                    {/* Êà¶Áï•ÁöÑ„Çπ„Ç≠„ÉÉ„Éó */}
                                    <button 
                                        onClick={handleSkip}
                                        className="w-full haptic-active text-neutral-600 font-medium text-sm py-3 transition-colors hover:text-neutral-400"
                                    >
                                        Êà¶Áï•ÁöÑ‰ºëÊÅØÔºà„Çπ„Ç≠„ÉÉ„ÉóÔºâ
                                    </button>
                                </motion.div>
                            ) : (
                                <motion.div 
                                    key="done"
                                    initial={{ opacity: 0, scale: 0.9 }}
                                    animate={{ opacity: 1, scale: 1 }}
                                    transition={{ duration: 0.8, ease: "easeOut" }}
                                    className="flex flex-col items-center"
                                >
                                    <h2 className="text-6xl font-light text-white mb-6 serif-font tracking-tight">Perfect.</h2>
                                    <p className="text-neutral-500 text-lg serif-font">ÊòéÊó•„ÅÆ„ÅÇ„Å™„Åü„ÇÇ„ÄÅ„Åç„Å£„Å®Áæé„Åó„ÅÑ„ÄÇ</p>
                                </motion.div>
                            )}
                        </AnimatePresence>

                    </div>

                    {/* Particles Animation for Completion */}
                    <AnimatePresence>
                        {particles.map(p => (
                            <motion.div
                                key={p.id}
                                initial={{ x: p.x, y: p.y, opacity: 1, scale: 0 }}
                                animate={{ 
                                    x: p.x + Math.cos(p.angle) * 100 * p.speed, 
                                    y: p.y + Math.sin(p.angle) * 100 * p.speed,
                                    opacity: 0,
                                    scale: p.size
                                }}
                                transition={{ duration: 0.8, ease: "easeOut" }}
                                className="absolute bg-white rounded-full pointer-events-none"
                                style={{ width: 4, height: 4 }}
                            />
                        ))}
                    </AnimatePresence>

                    {/* The Mentor Toast */}
                    <Toast message={toastMessage} />
                    
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
